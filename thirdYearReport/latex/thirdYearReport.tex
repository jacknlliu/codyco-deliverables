%% Template for EU report, using the report.sty style file

\documentclass[12pt,a4paper,twoside]{article}
%% common package
\usepackage[headers]{report}
\usepackage{xspace}
\usepackage{verbatim}
\usepackage[usenames]{color}
\usepackage[usenames,dvipsnames,table]{xcolor}
\usepackage[pdftex,dvips]{graphicx}
\usepackage[hyphens]{url}
\usepackage{array}
\usepackage{color}
\usepackage{longtable}
\usepackage{tikz}
\usepackage{wrapfig}
\usepackage{amsmath}
\usepackage{ragged2e}
\usetikzlibrary{graphs}
\usetikzlibrary{backgrounds}
%%

%%insert here other packages needed by sections
%\usepackage{amsfont}
\usepackage{amsmath}
\usepackage{amssymb}

%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Titlepage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% declaration of variables used in style
\reportDocnumber{Year 3}
\reportTitle{Third year project objectives report}

\reportAuthor{CoDyCo Consortium}
\reportResponsiblePartner{IIT}
\reportAffiliation{% Insert here authors affiliations
 IIT, TUD, UPMC, UB, JSI, INRIA.
}

\reportReviewer{}
\reportCoordinator{Francesco Nori}
\reportActivityNumber{1} %% n=1,..,10
\reportActivity{RTD}
\reportDoctype{Periodic report} %% or Prototype
\reportClassification{Public} % or Consortium
\reportDistribution{Consortium} %
\reportStatus{Draft} % Draft or Final
\reportDeliveryDate{01/04/2015}
\reportVersion{1.0}
\reportDate{Apr.~1, 2015}
\reportYear{2014}
\reportPages{\pageref{LastPage}}
\reportChangelog{v.1.0 & Feb 13, 2014 & First draft %%\\\hline
%%              v.2.0 & Feb 20, 2007 & Final version
}
\reportProjectStartingDate{1st March 2013}
\reportProjectEndDate{28th February 2017}
\reportProjectAcronym{CoDyCo}
\reportProjectTitle{Whole-Body Compliant Dynamical Contacts in Cognitive Humanoids}
 \reportContractNumber{600716}
 \reportProjectCoordinator{Fondazione Istituto Italiano di Tecnologia}
 \reportProjectUrl{www.codyco.eu}
 \reportFrameworkProgramme{FP7}
 
 \reportWorkpackage{All work packages}
 \reportEditors{Francesco Nori, Vincent Padois, Jan Peters, Elmar R\"ukert, Jan Babic, Michael Mistry, Morteza Azad, Serena Ivaldi, Daniele Pucci}
 \reportContributors{Entire CoDyCo consortium}
 \reportReviewers{-}
\reportAbstract{The scope of the current report is to present the results ...}
\reportReviewers{reviewers}
\reportKeywordList{kw, list, etc, }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Sections
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% constants{}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Misc. by Vincent
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{titlesec}
\newcommand{\sectionbreak}{}
\graphicspath{{./images/}}
\usepackage{pdfpages}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{multirow}
\usepackage{appendix}
\usepackage{hyperref}


%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% BEGIN DOCUMENT
\begin{document}

\reportMaketitle


%%TODO move to style
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
 
 \clearpage

\setcounter{tocdepth}{5}

\newpage
\renewcommand*\contentsname{Table of Contents}
\renewcommand*\listfigurename{Index of Figures}
\tableofcontents
\newpage
\listoffigures
\newpage

%%%%%%%%%%%%%%%%%%%%%%%% Start report content here.

\setcounter{section}{3}
\setcounter{subsection}{1}
\setcounter{secnumdepth}{5}

\begin{figure}[h]
  \centering
    \includegraphics[width=.5\textwidth]{images/icub_igt_2.jpeg}
  \caption{The IIT CoDyCo team at the Italia's got talent television show. The robot performed the CoDyCo balancing demonstration with recent results on contact switching.}
  \label{fig:images_icub_igt_2}
\end{figure}

\subsection{Project objectives for the period}

\subsubsection{Overview}

The specificity of CoDyCo relies on the fact that the progress beyond the state of the art is guided by the yearly implementation on the iCub humanoid. Within this context, \textbf{CoDyCo third year specific objective was to design and implement the control of whole-body posture on compliant (non-rigid) contacts}. This objective poses specific challenges: (1) if all contacts are compliant, suitable posture (i.e. floating-base) estimation strategy is required; (2) if no model of the environment compliance is available, suitable on-line estimation algorithms are necessary; (3) finally, the control of compliant contact wrenches poses specific control challenges (the relative degree increases with respect to the rigid case). To address these challenges, a number of scientific sub-objectives have been defined and achieved during the CoDyCo third year. In work package 1, software tools for environmental compliance estimation and floating base estimation were developed and released with an open-source license. In work package 3, the theoretical control framework for balancing on compliant contacts was developed. In work package 4, models for real-time regression with latent contact type inference have been analysed. In work package 5, two demonstration scenarios have been implemented: balancing on a compliant carpet and balancing on a seesaw. 

Beyond the activities to achieve this result, other long term activities have been conducted in preparation for the following years objectives. These activities involve human experiments, software infrastructure maintenance and the development of learning/control algorithms.

\begin{longtable}{|C{1.5cm}|C{1.5cm}|C{1.5cm}|C{1.5cm}|C{1.5cm}|C{1.5cm}|C{1.5cm}|C{1.5cm}|}
\cline{1-7}
\footnotesize \textbf{Task}& \footnotesize \textbf{IIT}&\footnotesize \textbf{TUD}&\footnotesize \textbf{UPMC}& \footnotesize \textbf{UB} &\footnotesize \textbf{JSI} &\footnotesize \textbf{INRIA} & \multicolumn{1}{l}{} \\ \hline
\footnotesize WP1      &  0.00     &  1.00   &  -      &  2.18   &  2.00  &  2.96  &  8.14 \\  \hline
\footnotesize WP2      &  -        &  1      &  1.20   &  13.88  &  21.69 &  0.52  &  38.29\\  \hline
\footnotesize WP3      &  -        &  9.65   &  8.79   &  1.63   &  2.00  &  4.03  &  26.10\\  \hline
\footnotesize WP4      &  9.79     &  12     &  0.74   &  1.68   &  3.00  &  3.30  &  30.51\\  \hline
\footnotesize WP5      &  13.06    &  2      &  0.14   &  1.44   &  -     &  0.52  &  17.16\\  \hline
\footnotesize WP6      &  1.51     &  1      &  0.19   &  -      &  0.44  &  -     &   3.14\\  \hline
\footnotesize WP7      &  1.00     &  -      &  0.11   &  -      &  -     &  -     &   1.11\\  \hline
\multicolumn{1}{l|}{}  &  25.36    &  26.65  &  11.17  &  20.81  &  29.13 &  11.33 &  \textbf{123.45}     \\  \cline{2-8}
\end{longtable}

\subsubsection*{Measures to address reviewers' recommendations}

Hereafter we discuss how the CoDyCo consortium addressed the two main recommendations provided as a report of the second year review meeting. The recommendations are reported below in the boxed paragraph.

\fbox{\begin{minipage}{\textwidth}
\emph{The members of the consortium have to focus their efforts in integrating all developments achieved in WP2, WP3, and WP4 into the physical robot through WP5. Many control and learning methods have been considered during the last two years. These methods should converge, as much as possible, into a unified global control scheme, which can be shared and disseminated by the consortium.} \end{minipage}}

\medskip
\noindent 
Integration and unification between different control and learning methods have been pursued with the following activities. 

\begin{enumerate}
\item UB and TUD implemented state of the art learning algorithms (WP4) for environmental compliance estimation (WP1). The associated learning strategy has been implemented in a learning algorithm which is distributed with an open source license (\url{https://github.com/azadm/LWR_for_ContactParams}). The estimated model is suitable for the control models proposed in WP3 and coincides with the one to be used in the third year validation scenario (WP5). 

\item IIT, UB and UPMC contributed to D3.2 on ``Local solver in compliant-world cases'' \cite{deliverable32}. The document presents two control algorithms, distinguishing between a model-free (UPMC) and a model-based (IIT, UB) approach. On the one hand, the document is an effort to converge to a common approach for mode-based approach. On the other hand, the deliverable underlines the necessity of investigating different approaches when they lead to viable alternatives (model-free versus model based). 

\item IIT designed and distributed among partners a document\footnote{\url{https://it.sharelatex.com/project/564ddaaf9cec09503ca12023}.} to define a common notation suitable for the CoDyCo scope. The use of a common notation is a prerequisite for comparing different approaches and converging to into a unified global control scheme. 
\end{enumerate}

\begin{figure}[h]
  \centering
    \includegraphics[width=.4\textwidth]{images/yogaSim.jpg} \qquad
	\includegraphics[width=.4\textwidth]{images/seesawSim.jpg}
  \caption{Screen shots of the replicable simulations of the CoDyCo validation scenarios. These simulations can be replicated on Linux and   OsX, downloading and compiling the open-source software available on the CoDyCo software repository. (1) Instruction on how   the install the entire software framework can be found here: \protect\url{https://github.com/robotology/codyco-superbuild};   (2) instructions on how to run the specific demonstration can be found here: \protect\url{https://github.com/robotology-playground/WBI-Toolbox-controllers}; (3) the scientific paper describing the controller and the software architecture is openly available here:   \protect\url{http://journal.frontiersin.org/article/10.3389/frobt.2015.00006/full}.}
  \label{fig:images_yogaSim}
\end{figure}


\noindent
\fbox{\begin{minipage}{\textwidth}
\emph{The simulation environment and experimental data are in open source, and this is commendable, but they should be made easier to use.} \end{minipage}}

\medskip
\noindent 
Dataset and software documentation has been improved. Simulations of the iCub first and second year validation scenarios can be performed on the iCub simulator and on the iCub robot following the given instructions. Experimental dataset are publicly available on \url{https://db.codyco.eu}.


\begin{enumerate}
\item Instructions for compiling the entire CoDyCo software have been improved. The installation procedure \url{https://github.com/robotology/codyco-superbuild} leverages the YCM \url{https://github.com/robotology/ycm} which guarantees the integration of multiple projects giving visibility to individual contributions while maintaining the structure of a single global project.  
	
\item The C++ torque balancing module (first and second year validation scenario) software has been documented and step-by-step instructions for replicating the demonstration in simulation and on the real robot have been optimised based on user feedback (see Fig.~\ref{fig:images_yogaSim}).

\item The Simulink seesaw torque balancing module (third year demo) has been documented and it can replicated on simulation following the given instructions (see also Fig.~\ref{fig:images_yogaSim}). 

\item Exploiting the available tools for software testing (e.g. Travis \url{https://travis-ci.com} and RTF \url{https://github.com/robotology/robot-testing}) a set of routines for continuos installation and testing of the CoDyCo software have been implemented. Testing includes the codyco-superbuild, the OCRA framework and the iDynTree software. These automatic tests guarantee the code consistency and a continuous validation of the installation.

\end{enumerate}

\input{sections/WP1/wp1_objectives.tex}
\input{sections/WP2/wp2_objectives.tex}
\input{sections/WP3/wp3_objectives.tex}
\input{sections/WP4/wp4_objectives.tex}
\input{sections/WP5/wp5_objectives.tex}
\input{sections/WP6/wp6_objectives.tex}
\input{sections/WP7/wp7_objectives.tex}


\subsection{Work progress and achievements during the period}

\subsubsection{Progress overview and contribution to the research field}

All the CoDyCo third year objectives have been attained. Here is a list of the main CoDyCo third year
achievements. \begin{itemize}

\item Release of an open-source software for contact compliance estimation.

\item Release of an open-source software for floating-base estimation.

\item Models of human interaction with compliant contacts.

\item Definition and solution of the theoretical framework for balancing on compliant contacts.

\item Learning models of simultaneous use of elementary tasks and co-articulation of multiple tasks.

\item Implementation of the third validation scenario: balancing on compliant or dynamical contacts.

\end{itemize}

\subsubsection{Work packages progress}

\input{sections/WP1/wp1_progress_recap.tex}
\input{sections/WP2/wp2_progress_recap.tex}
\input{sections/WP3/wp3_progress_recap.tex}
\input{sections/WP4/wp4_progress_recap.tex}
\input{sections/WP5/wp5_progress_recap.tex}
\input{sections/WP6/wp6_progress_recap.tex}
\input{sections/WP7/wp7_progress_recap.tex}

\input{sections/WP1/wp1_progress.tex}
\input{sections/WP1/wp1_resources.tex}

\input{sections/WP2/wp2_progress.tex}
\input{sections/WP2/wp2_resources.tex}

\input{sections/WP3/wp3_progress.tex}
\input{sections/WP3/wp3_resources.tex}

\input{sections/WP4/wp4_progress.tex}
\input{sections/WP4/wp4_resources.tex}

\input{sections/WP5/wp5_progress.tex}
\input{sections/WP5/wp5_resources.tex}

\input{sections/WP6/wp6_progress.tex}
\input{sections/WP6/wp6_resources.tex}

\input{sections/WP7/wp7_progress.tex}
\input{sections/WP7/wp7_resources.tex}

\clearpage
\subsection{Deliverables and milestones tables}
\subsubsection{Deliverables (excluding the periodic and final reports)}
{\centering \includegraphics[width=0.9\textwidth]{./images/deliverables.pdf}}

\subsubsection{Milestones}
{\centering \includegraphics[width=0.9\textwidth]{./images/milestones.pdf}}

\clearpage
\bibliographystyle{IEEEtran}
\bibliography{thirdYearReport_WP4,thirdYearReport_WP3,thirdYearReport_WP2,thirdYearReport_WP1}

\input{sections/dissemination.tex}

\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% save-place: t
%%% End:
